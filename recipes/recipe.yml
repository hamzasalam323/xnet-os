# yaml-language-server: $schema=https://schema.blue-build.org/recipe-v1.json
name: xnet-inc-os
description: XNet Inc. Developer OS (Vauxite/XFCE Base). Customized by Joshua S. Doucette.

# SWITCHED TO VAUXITE (Native XFCE Image)
# This prevents conflicts between GNOME and XFCE and saves build time.
base-image: ghcr.io/ublue-os/vauxite-main
image-version: 43

modules:
  # 1. Copy Config Files (Repos, Distrobox config, etc.)
  - type: files
    files:
      - source: system
        destination: /

  # 2. RPM Packages (Only GUI Apps & System Utilities)
  - type: dnf
    repos:
      copr:
        - atim/starship
      files:
        # Ensure these exist in your files/system/etc/yum.repos.d/ folder!
        - /etc/yum.repos.d/google-chrome.repo
        - /etc/yum.repos.d/gh-cli.repo
        - /etc/yum.repos.d/google-cloud-sdk.repo
        - /etc/yum.repos.d/vscodium.repo
        - /etc/yum.repos.d/rpmfusion-free.repo
        - /etc/yum.repos.d/rpmfusion-nonfree.repo
    install:
      packages:
        # --- Shell & Core ---
        - micro
        - starship
        - git
        - gh
        - google-cloud-cli
        - zsh
        
        # --- GUI Applications ---
        - google-chrome-unstable
        - codium
        - kitty
        - virt-manager
        - gnome-boxes
        
        # --- Cockpit (Web Admin) ---
        - cockpit
        - cockpit-bridge
        - cockpit-doc
        - cockpit-kdump
        - cockpit-networkmanager
        - cockpit-packagekit
        - cockpit-selinux
        - cockpit-sosreport
        - cockpit-storaged
        - cockpit-system
        - cockpit-machines
        - cockpit-podman
        - cockpit-ostree
        
        # --- SE Linux Utilities ---
        - setroubleshoot-server
        - setools-console
        - mcstrans

  # 3. System Configuration Scripts
  - type: script
    snippets:
      - |
        #!/usr/bin/env bash
        set -oue pipefail

        # Install Gemini CLI (Global NPM is okay for single tools)
        npm install -g @google/gemini-cli

        # Enable System Services
        # (Note: LightDM is already enabled by default in Vauxite!)
        systemctl enable cups
        systemctl enable cockpit.socket
        systemctl enable libvirtd

  # 4. Justfile (Automates your Distrobox setup)
  - type: just
    files:
      - just/setup-dev.just

  # 5. Flatpaks (Sandboxed Apps)
  - type: default-flatpaks
    configurations:
      - notify: true
        scope: system
        install:
          - org.gnome.Loupe
          - com.rustdesk.RustDesk
          - org.libreoffice.LibreOffice
          - org.videolan.VLC
      - scope: user